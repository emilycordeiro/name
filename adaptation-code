
breed [bugs bug]
breed[hawks hawk]
breed[grubs grub]


Hawks-own
[
  H-energy
]

bugs-own
[
  energy
  safe?
]

to desert
  clear-all
  set-default-shape bugs "butterfly"
  set-default-shape grubs "dot"
  set-default-shape hawks "Hawk"
  ask patches
  [
    set pcolor one-of [24 25 26 35 ]
  ]
  create-bugs 100
  [
    set color one-of [blue violet pink yellow white orange green]
    setxy random-xcor random-ycor
    set size 8
    set energy 160
    ifelse color = orange
    [
      set safe? true
    ]
    [
      set safe? false
    ]
  ]
  create-hawks 10
  [
    setxy -100 100
    set color black
    set size 20
    set H-energy 200
  ]
  growfood
  reset-ticks
end

to forest
  clear-all
  set-default-shape bugs "butterfly"
  set-default-shape grubs "dot"
  set-default-shape hawks "hawk"
  ask patches
  [
    set pcolor one-of [61 61.5 62 62.5 63 63.5 64 64.5]
  ]
  create-bugs 100
  [
    set color one-of [blue violet pink yellow white orange green]
    setxy random-xcor random-ycor
    set size 8
    set energy 160
    ifelse color = green
    [
      set safe? true
    ]
    [
      set safe? false
    ]
  ]
  create-hawks 10
  [
    setxy -100 100
    set color black
    set size 20
    set H-energy 200
  ]
  growfood
  reset-ticks
end

to go
  ask bugs
  [
    bugs-move
    eat
    bugs-reproduce
    bugs-naturaldeath
    bugs-get-eaten
  ]
  ask grubs
  [
    grubs-get-eaten
  ]
  GrowFood
  ask hawks
  [
    hawkeats
    hawks-reproduce
    hawks-move
  ]
  tick
end

to bugs-move
    left random 50
    right random 50
    forward 1
    set energy energy - 1
end

to hawks-move
    left random 50
    right random 50
    forward 1
    set H-energy H-energy - 0.1
end

to GrowFood
  ask patches
  [
    if random 1000 = 1
    [
      sprout-grubs 1
      [
        set color red
      ]
    ]
  ]
end

to eat
  if  any? grubs-here
  [
    set energy energy + 7.5
  ]
end

to bugs-reproduce
  if energy > 150
  [
    set energy energy / 2
    hatch 1
    [
      set energy 150
      forward 1
    ]
  ]
end

to hawks-reproduce
  if H-energy > 150
  [
    set H-energy H-energy / 2
    hatch 1
    [
      set H-energy 150
      forward 1
    ]
  ]
end

to bugs-naturaldeath
  if energy < 0
  [
    die
  ]
end


to grubs-get-eaten
  if any? bugs-here
  [
    die
  ]
end

to bugs-get-eaten
  if any? Hawks-here
  [
    if safe? = false
    [
      die
    ]
  ]
end

to hawkeats
  if (any? bugs-here with [safe? = false])
  [
    set H-energy H-energy + 500
    hawks-move
  ]
end
